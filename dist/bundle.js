!function(t){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var a,i,n,o,g,h,d=300,s=300,m=40,c=40,l=function(){function t(t,e){this.img=new Image,this.screen=t,this.readyToDraw=e,this.isScaled=!1,this.drawSmallImg=this.drawSmallImg.bind(this),this.handleFileSelect=this.handleFileSelect.bind(this),this.onload=this.onload.bind(this)}return t.prototype.handleFileSelect=function(t){var e;"drop"===t.type&&(t.stopPropagation(),t.preventDefault(),e=t.dataTransfer.files),"change"===t.type&&(e=t.target.files);var r=[],a=e[0];r.push("<li><strong>",a.name,"</strong> (",a.type||"n/a",") - ",a.size," bytes, last modified: ",a.lastModifiedDate.toLocaleDateString(),"</li>"),this.img.src=a.name,this.readyToDraw=!0,document.getElementById("list").innerHTML="<ul>"+r.join("")+"</ul>",this.onload()},t.prototype.drawSmallImg=function(t){var e=t.offsetX-2,r=t.offsetY-2,a=this.screen.getImageData(e,r,1,1);if(this.readyToDraw){this.isScaled&&(e*=this.img.width/d,r*=this.img.height/s),this.screen.clearRect(0,0,d,s),this.screen.strokeStyle="lightgray",this.screen.imageSmoothingEnabled=!1,this.isScaled?this.screen.drawImage(this.img,0,0,d,s):this.screen.drawImage(this.img,0,0,this.img.width,this.img.height),this.screen.strokeRect(t.offsetX+5,t.offsetY+5,m,c),this.screen.drawImage(this.img,Math.floor(e-3),Math.floor(r-3),5,5,t.offsetX+5,t.offsetY+5,m,c);var i=document.getElementById("color"),n=a.data,o="rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]/255+")";i.style.background=o,document.getElementById("rgb").innerHTML="<strong>"+o+"</strong> "}},t.prototype.getImage=function(){return this.img},t.prototype.getScreen=function(){return this.screen},t.prototype.setScaled=function(t){this.isScaled=t},t.prototype.onload=function(){this.getScreen().clearRect(0,0,d,s),this.getImage().width>d||this.getImage().height>s?(this.getScreen().drawImage(this.getImage(),0,0,d,s),this.setScaled(!0)):(this.getScreen().drawImage(this.getImage(),0,0,this.getImage().width,this.getImage().height),this.setScaled(!1))},t}(),u=function(){function t(t,e,r,a){e?(this._width=e.width,this._height=e.height):(this._width=r,this._height=a),this.screenCanvas=t,this.imageData=t.getImageData(0,0,this._width,this._height),this.initArray(),this.dataToImageArray2D(),this.dataToImageArray2D=this.dataToImageArray2D.bind(this),this.imageArray2DtoData=this.imageArray2DtoData.bind(this)}return t.prototype._initConstructor1=function(){},t.prototype.getColorIndicesForCoord=function(t,e){var r=e*(4*this._width)+4*t;return[r,r+1,r+2]},t.prototype.dataToImageArray2D=function(){for(var t,e=0;e<this._height;e++)for(var r=0;r<this._width;r++)t=this.getColorIndicesForCoord(r,e),this.arrImage[0][e][r]=this.imageData.data[t[0]],this.arrImage[1][e][r]=this.imageData.data[t[1]],this.arrImage[2][e][r]=this.imageData.data[t[2]]},t.prototype.imageArray2DtoData=function(t,e){for(var r,a=0;a<this._height;a++)for(var i=0;i<this._width;i++)r=this.getColorIndicesForCoord(i,a),this.imageData.data[r[0]]=e[0][a][i],this.imageData.data[r[1]]=e[1][a][i],this.imageData.data[r[2]]=e[2][a][i];t.putImageData(this.imageData,0,0)},t.prototype.imageArray2DtoDataWithResizing=function(t,e){var r,a,i,n;r=e[0][0][0],a=e[0][0][0];for(var o=0;o<this._height;o++)for(var g=0;g<this._width;g++)r=Math.max(r,e[0][o][g]),a=Math.min(a,e[0][o][g]);i=255/(r-a);for(o=0;o<this._height;o++)for(g=0;g<this._width;g++)n=this.getColorIndicesForCoord(g,o),this.imageData.data[n[0]]=i*(e[0][o][g]-a),this.imageData.data[n[1]]=i*(e[1][o][g]-a),this.imageData.data[n[2]]=i*(e[2][o][g]-a);t.putImageData(this.imageData,0,0)},t.prototype.initArray=function(){this.arrImage=new Array(3),this.arrImage[0]=new Array(this._height),this.arrImage[1]=new Array(this._height),this.arrImage[2]=new Array(this._height);for(var t=0;t<this._height;t++)this.arrImage[0][t]=new Array(this._width),this.arrImage[1][t]=new Array(this._width),this.arrImage[2][t]=new Array(this._width)},t.prototype.getArrayImg=function(){return this.arrImage},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}(),f=function(){function t(){}return t.toGray=function(t){for(var e,r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)e=(r[0][i][n]+r[1][i][n]+r[2][i][n])/3,a[0][i][n]=e,a[1][i][n]=e,a[2][i][n]=e;return a},t.toNegative=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=255-e[0][a][i],r[1][a][i]=255-e[1][a][i],r[2][a][i]=255-e[2][a][i];return r},t.toRed=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=e[0][a][i],r[1][a][i]=0,r[2][a][i]=0;return r},t.toGreen=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=0,r[1][a][i]=e[1][a][i],r[2][a][i]=0;return r},t.toBlue=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=0,r[1][a][i]=0,r[2][a][i]=e[2][a][i];return r},t.correctionGamma=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=this.funcionGamma(r[0][i][n],e[0]),a[1][i][n]=this.funcionGamma(r[1][i][n],e[1]),a[2][i][n]=this.funcionGamma(r[2][i][n],e[2]);return a},t.funcionGamma=function(t,e){return Math.min(255*Math.pow(t/250,e),255)},t.initArray=function(t,e){var r=new Array(3);r[0]=new Array(e),r[1]=new Array(e),r[2]=new Array(e);for(var a=0;a<e;a++)r[0][a]=new Array(t),r[1][a]=new Array(t),r[2][a]=new Array(t);return r},t.toUmbral=function(t,e){for(var r,a=t.getArrayImg(),i=this.initArray(t.getWidth(),t.getHeight()),n=0;n<t.getHeight();n++)for(var o=0;o<t.getWidth();o++)r=(a[0][n][o]+a[1][n][o]+a[2][n][o])/3,i[0][n][o]=r>e?255:0,i[1][n][o]=r>e?255:0,i[2][n][o]=r>e?255:0;return i},t.toDesfaceX=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=r[0].length,n=r[0][0].length,o=0;o<i;o++)for(var g=0;g<n;g++)a[1][o][g]=r[1][o][g],a[0][o][g]=g-e>=0?r[0][o][g-e]:r[0][o][g],a[2][o][g]=g+e<n?r[2][o][g+e]:r[2][o][g];return a},t.toDesfaceY=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=r[0].length,n=r[0][0].length,o=0;o<i;o++)for(var g=0;g<n;g++)a[1][o][g]=r[1][o][g],a[0][o][g]=o-e>=0?r[0][o-e][g]:r[0][o][g],a[2][o][g]=o+e<i?r[2][o+e][g]:r[2][o][g];return a},t.toUmbral2limites=function(t,e){for(var r,a=t.getArrayImg(),i=a[0].length,n=a[0][0].length,o=this.initArray(t.getWidth(),t.getHeight()),g=e[0],h=e[1],d=0;d<i;d++)for(var s=0;s<n;s++)r=(a[0][d][s]+a[1][d][s]+a[2][d][s])/3,o[0][d][s]=r<=g&&r>=h?250:0,o[1][d][s]=r<=g&&r>=h?250:0,o[2][d][s]=r<=g&&r>=h?250:0;return o},t.changeBrightness=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=r[0][i][n]*e>255?255:r[0][i][n]*e,a[1][i][n]=r[1][i][n]*e>255?255:r[1][i][n]*e,a[2][i][n]=r[2][i][n]*e>255?255:r[2][i][n]*e;return a},t.colorGradienteX=function(t,e){var r,a,i,n,o,g,h,d,s,m,c=t.getArrayImg(),l=this.initArray(t.getWidth(),t.getHeight());a=e[0],g=e[1],n=e[2],i=e[3],h=e[4],o=e[5],d=(i-a)/t.getWidth(),s=(h-g)/t.getWidth(),m=(o-n)/t.getWidth();for(var u=0;u<t.getWidth();u++){for(var f=0;f<t.getHeight();f++)r=(c[0][f][u]+c[1][f][u]+c[2][f][u])/3,l[0][f][u]=Math.floor(r*a/255),l[1][f][u]=Math.floor(r*g/255),l[2][f][u]=Math.floor(r*n/255);a+=d,g+=s,n+=m}return l},t.colorGradientY=function(t,e){var r,a,i,n,o,g,h,d,s,m,c=t.getArrayImg(),l=this.initArray(t.getWidth(),t.getHeight());a=e[0],g=e[1],n=e[2],i=e[3],h=e[4],o=e[5],d=(i-a)/t.getHeight(),s=(h-g)/t.getHeight(),m=(o-n)/t.getHeight();for(var u=0;u<t.getHeight();u++){for(var f=0;f<t.getWidth();f++)r=(c[0][u][f]+c[1][u][f]+c[2][u][f])/3,l[0][u][f]=Math.floor(r*a/255),l[1][u][f]=Math.floor(r*g/255),l[2][u][f]=Math.floor(r*n/255);a+=d,g+=s,n+=m}return l},t.changeContraste=function(t,e){var r,a,i,n,o=t.getArrayImg(),g=this.initArray(t.getWidth(),t.getHeight());n=(e+100)/100;for(var h=0;h<t.getHeight();h++)for(var d=0;d<t.getWidth();d++)(r=255*((o[0][h][d]/255-.5)*n+.5))>255&&(r=255),r<0&&(r=0),g[0][h][d]=r,(a=255*((o[1][h][d]/255-.5)*n+.5))>255&&(a=255),a<0&&(a=0),g[1][h][d]=a,(i=255*((o[2][h][d]/255-.5)*n+.5))>255&&(i=255),i<0&&(i=0),g[2][h][d]=i;return g},t.pow=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=Math.pow(r[0][i][n],e),a[1][i][n]=Math.pow(r[1][i][n],e),a[2][i][n]=Math.pow(r[2][i][n],e);return a},t.toCos=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=Math.cos(e[0][a][i]),r[1][a][i]=Math.cos(e[1][a][i]),r[2][a][i]=Math.cos(e[2][a][i]);return r},t.toSubtract=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=r[0][i][n]-e,a[1][i][n]=r[1][i][n]-e,a[2][i][n]=r[2][i][n]-e;return a},t.toMultiplication=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=e*r[0][i][n],a[1][i][n]=e*r[1][i][n],a[2][i][n]=e*r[2][i][n];return a},t.toSine=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=Math.sin(e[0][a][i]),r[1][a][i]=Math.sin(e[1][a][i]),r[2][a][i]=Math.sin(e[2][a][i]);return r},t.toAdd=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=r[0][i][n]+e,a[1][i][n]=r[1][i][n]+e,a[2][i][n]=r[2][i][n]+e;return a},t.toDividir=function(t,e){for(var r=t.getArrayImg(),a=this.initArray(t.getWidth(),t.getHeight()),i=0;i<t.getHeight();i++)for(var n=0;n<t.getWidth();n++)a[0][i][n]=r[0][i][n]+e,a[1][i][n]=r[1][i][n]+e,a[2][i][n]=r[2][i][n]+e;return a},t.toSqrt=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=Math.sqrt(e[0][a][i]),r[1][a][i]=Math.sqrt(e[1][a][i]),r[2][a][i]=Math.sqrt(e[2][a][i]);return r},t.toTan=function(t){for(var e=t.getArrayImg(),r=this.initArray(t.getWidth(),t.getHeight()),a=0;a<t.getHeight();a++)for(var i=0;i<t.getWidth();i++)r[0][a][i]=Math.tan(e[0][a][i]),r[1][a][i]=Math.tan(e[1][a][i]),r[2][a][i]=Math.tan(e[2][a][i]);return r},t.addImg=function(t,e){for(var r=t.getArrayImg(),a=e.getArrayImg(),i=this.initArray(t.getWidth(),t.getHeight()),n=0;n<t.getHeight();n++)for(var o=0;o<t.getWidth();o++)i[0][n][o]=r[0][n][o]+a[0][n][o],i[1][n][o]=r[1][n][o]+a[1][n][o],i[2][n][o]=r[2][n][o]+a[2][n][o];return i},t}();a=document.getElementById("img1"),o=a.getContext("2d"),i=document.getElementById("img2"),g=i.getContext("2d"),n=document.getElementById("img4"),h=n.getContext("2d");var y=a,p=new l(o);p.getImage().onload=p.onload;var v=new l(h);v.getImage().onload=v.onload,a.addEventListener("mousemove",p.drawSmallImg),document.getElementById("files").addEventListener("change",p.handleFileSelect,!1),document.getElementById("files2").addEventListener("change",v.handleFileSelect,!1),y.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}),!1),y.addEventListener("drop",p.handleFileSelect,!1),document.getElementById("op-gris").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoData(g,f.toGray(e))}),!1),document.getElementById("op-negativo").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoData(g,f.toNegative(e))}),!1),document.getElementById("op-rojo").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoData(g,f.toRed(e))}),!1),document.getElementById("op-verde").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoData(g,f.toGreen(e))}),!1),document.getElementById("op-azul").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoData(g,f.toBlue(e))}),!1),document.getElementById("op-gamma").addEventListener("click",(function(t){var e=prompt("Ingresa los factores de correccion Gamma, separados por coma").split(",").map((function(t){return parseFloat(t)})),r=new u(o,p.getImage());r.imageArray2DtoData(g,f.correctionGamma(r,e))}),!1),document.getElementById("op-umbral1").addEventListener("click",(function(t){var e=prompt("Ingresa el valor del umbral"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toUmbral(a,r))}),!1),document.getElementById("op-umbral-2-limites").addEventListener("click",(function(t){var e=prompt("Ingresa el rango minimo y el maximo separado por comas").split(",").map((function(t){return parseFloat(t)})),r=new u(o,p.getImage());r.imageArray2DtoData(g,f.toUmbral2limites(r,e))}),!1),document.getElementById("op-desfaseX").addEventListener("click",(function(t){var e=prompt("Ingresa el valor del desfase en X"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toDesfaceX(a,r))}),!1),document.getElementById("op-desfaseY").addEventListener("click",(function(t){var e=prompt("Ingresa el valor del desfase en Y"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toDesfaceX(a,r))}),!1),document.getElementById("op-brillo").addEventListener("click",(function(t){var e=prompt("Ingresa un valor en el rango de 0-2, como un porcentaje"),r=new u(o,p.getImage());r.imageArray2DtoData(g,f.changeBrightness(r,parseFloat(e)))}),!1),document.getElementById("op-gradienteX").addEventListener("click",(function(t){var e=prompt("Ingresa color de Inicio y final en formato r,g,b, separados por coma").split(",").map((function(t){return parseFloat(t)})),r=new u(o,p.getImage());r.imageArray2DtoData(g,f.colorGradienteX(r,e))}),!1),document.getElementById("op-gradienteY").addEventListener("click",(function(t){var e=prompt("Ingresa color de Inicio y final en formato r,g,b, separados por coma").split(",").map((function(t){return parseFloat(t)})),r=new u(o,p.getImage());r.imageArray2DtoData(g,f.colorGradientY(r,e))}),!1),document.getElementById("op-contraste").addEventListener("click",(function(t){var e=prompt("Ingresa un valor entre el rango de -100 a 100"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.changeContraste(a,r))}),!1),document.getElementById("op-pow").addEventListener("click",(function(t){var e=prompt("Ingresa el valor de la potencia"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoDataWithResizing(g,f.pow(a,r))}),!1),document.getElementById("op-sqrt").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoDataWithResizing(g,f.toSqrt(e))}),!1),document.getElementById("op-sine").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoDataWithResizing(g,f.toSine(e))}),!1),document.getElementById("op-cos").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoDataWithResizing(g,f.toCos(e))}),!1),document.getElementById("op-tan").addEventListener("click",(function(t){var e=new u(o,p.getImage());e.imageArray2DtoDataWithResizing(g,f.toTan(e))}),!1),document.getElementById("op-add").addEventListener("click",(function(t){var e=prompt("Ingresa el valor a sumar en el rango 1 hasta 255"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toAdd(a,r))}),!1),document.getElementById("op-subtract").addEventListener("click",(function(t){var e=prompt("Ingresa el valor a restar en el rango 1 hasta 255"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toSubtract(a,r))}),!1),document.getElementById("op-multiplicacion").addEventListener("click",(function(t){var e=prompt("Ingresa el valor"),r=parseFloat(e),a=new u(o,p.getImage());a.imageArray2DtoData(g,f.toMultiplication(a,r))}),!1),document.getElementById("op-div").addEventListener("click",(function(t){var e=prompt("Ingresa el valor a dividir en el rango 1 hasta 255");if(0==(r=parseFloat(e))){e=prompt("Ingresa un valor diferente de 0");var r=parseFloat(e);(a=new u(o,p.getImage())).imageArray2DtoData(g,f.toDividir(a,r))}else{var a;(a=new u(o,p.getImage())).imageArray2DtoData(g,f.toDividir(a,r))}}),!1),document.getElementById("op-addimg").addEventListener("click",(function(t){var e=new u(o,p.getImage()),r=new u(h,v.getImage());e.imageArray2DtoDataWithResizing(g,f.addImg(e,r))}),!1)}]);